"use strict";const STORAGE_ID="theme.velak.klingt.org";let style;function loadTheme(){var e=window.localStorage.getItem(STORAGE_ID);return e?JSON.parse(e):null}function saveTheme(e){window.localStorage.setItem(STORAGE_ID,JSON.stringify(e))}function readSVG(e,t){const n=new FileReader;n.onload=e=>{t(e.target.result)},n.readAsText(e,"UTF-8")}function applyTheme(e,t){var n=document.documentElement.style;n.setProperty("--background",e.background),n.setProperty("--f_high",e.f_high),n.setProperty("--f_med",e.f_med),n.setProperty("--f_low",e.f_low),n.setProperty("--f_inv",e.f_inv),n.setProperty("--b_high",e.b_high),n.setProperty("--b_med",e.b_med),n.setProperty("--b_low",e.b_low),n.setProperty("--b_inv",e.b_inv),t&&saveTheme(e)}document.addEventListener("DOMContentLoaded",e=>{if(style=window.getComputedStyle(document.querySelector(":root")),style){var t=loadTheme();t?applyTheme(t):(t={background:style.getPropertyValue("--background"),f_high:style.getPropertyValue("--f_high"),f_med:style.getPropertyValue("--f_med"),f_low:style.getPropertyValue("--f_low"),f_inv:style.getPropertyValue("--f_inv"),b_high:style.getPropertyValue("--b_high"),b_med:style.getPropertyValue("--b_med"),b_low:style.getPropertyValue("--b_low"),b_inv:style.getPropertyValue("--b_inv")},saveTheme(t))}document.body&&(document.body.style.visibility="visible"),window.addEventListener("dragover",e=>{e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}),window.addEventListener("drop",e=>{e.preventDefault();const t=e.dataTransfer.files[0];t&&t.name.indexOf(".svg")>-1&&this.readSVG(t,e=>{const t=(new DOMParser).parseFromString(e,"text/xml");var n={background:t.getElementById("background").getAttribute("fill"),f_high:t.getElementById("f_high").getAttribute("fill"),f_med:t.getElementById("f_med").getAttribute("fill"),f_low:t.getElementById("f_low").getAttribute("fill"),f_inv:t.getElementById("f_inv").getAttribute("fill"),b_high:t.getElementById("b_high").getAttribute("fill"),b_med:t.getElementById("b_med").getAttribute("fill"),b_low:t.getElementById("b_low").getAttribute("fill"),b_inv:t.getElementById("b_inv").getAttribute("fill")};applyTheme(n),saveTheme(n)}),e.stopPropagation()})})